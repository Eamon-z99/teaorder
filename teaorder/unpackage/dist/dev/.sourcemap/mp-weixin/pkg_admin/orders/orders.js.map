{"version":3,"sources":["uni-app:///main.js","webpack:///D:/uniapp_project/food/pkg_admin/orders/orders.vue?d4fc","webpack:///D:/uniapp_project/food/pkg_admin/orders/orders.vue?0c08","webpack:///D:/uniapp_project/food/pkg_admin/orders/orders.vue?ccd4","webpack:///D:/uniapp_project/food/pkg_admin/orders/orders.vue?47e2","uni-app:///pkg_admin/orders/orders.vue","webpack:///D:/uniapp_project/food/pkg_admin/orders/orders.vue?9838","webpack:///D:/uniapp_project/food/pkg_admin/orders/orders.vue?7a06"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","orders","currentStatus","selectedOrderIds","statusTabs","label","value","currentPage","hasMore","loading","computed","isAllSelected","onLoad","methods","loadOrders","url","uni","method","header","success","fail","title","icon","complete","filterByStatus","onBatchSelect","batchDeliver","action","status","orderIds","resolve","reject","result","console","updateOrderStatus","viewOrderDetail","getStatusText","getStatusClass","formatTime","toggleSelectOrder","toggleSelectAll","getBatchButtonText","getActionButtonText","getNextStatus","onScrollToLower"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,eAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AAC6K;AAC7K,gBAAgB,uLAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjDA;AAAA;AAAA;AAAA;AAAqpB,CAAgB,kqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCuDzqB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC,aACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;MACA;IACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MAAA;MACA;QACA;QACA;QACA;MACA;MAEA;MAEA;MAEA;MACA;QACAC;MACA;MAEAC;QACAD;QACAE;QACAC;UACA;QACA;QACAC;UACA;YACA;YACA;cACA;YACA;cACA;YACA;YAEA;YACA;UACA;QACA;QACAC;UACAJ;YAAAK;YAAAC;UAAA;QACA;QACAC;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QAAA;MAAA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBACAC,sCAEA;gBACAX;gBAAA;gBAGAA;kBAAAK;gBAAA;gBAEAN;gBACAa;gBACA;kBACAb;kBACAa;gBACA;kBACAb;kBACAa;gBACA;kBACAb;kBACAa;gBACA;kBACAb;kBACAa;gBACA;gBAAA;gBAAA,OAEA;kBACAZ;oBACAD;oBACAE;oBACAC;sBACA;oBACA;oBACAlB;sBAAA6B;oBAAA;oBACAV;sBACAW;oBACA;oBACAV;sBACAW;oBACA;kBACA;gBACA;cAAA;gBAfAC;gBAiBAhB;gBAEA;kBACAA;oBAAAK;oBAAAC;kBAAA;kBACA;kBACA;gBACA;kBACAN;oBAAAK;oBAAAC;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAN;gBACAiB;gBACAjB;kBAAAK;kBAAAC;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAY;MAAA;MACAlB;QACAD;QACAE;QACAC;UACA;QACA;QACAlB;UAAA4B;QAAA;QACAT;UACA;YACAH;cAAAK;cAAAC;YAAA;YACA;YACA;UACA;YACAN;cAAAK;cAAAC;YAAA;UACA;QACA;QACAF;UACAJ;YAAAK;YAAAC;UAAA;QACA;MACA;IACA;IAEA;IACAa;MACAnB;QAAAD;MAAA;IACA;IAEA;IACAqB;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MAEA;QAAA;QACA;MACA;QAAA;QACA;MACA;QAAA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;UAAA;QAAA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACAX;MACA;QACAA;QACA;MACA;MACAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzUA;AAAA;AAAA;AAAA;AAAo9B,CAAgB,m8BAAG,EAAC,C;;;;;;;;;;;ACAx+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pkg_admin/orders/orders.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pkg_admin/orders/orders.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./orders.vue?vue&type=template&id=1d563304&scoped=true&\"\nvar renderjs\nimport script from \"./orders.vue?vue&type=script&lang=js&\"\nexport * from \"./orders.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orders.vue?vue&type=style&index=0&id=1d563304&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d563304\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pkg_admin/orders/orders.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=template&id=1d563304&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.orders.length &&\n    _vm.currentStatus !== \"\" &&\n    _vm.currentStatus !== \"completed\"\n  var g1 = g0 ? _vm.selectedOrderIds.length : null\n  var m0 = g0 ? _vm.getBatchButtonText() : null\n  var g2 =\n    _vm.orders.length &&\n    _vm.currentStatus !== \"\" &&\n    _vm.currentStatus !== \"completed\"\n  var l0 = _vm.__map(_vm.orders, function (order, __i1__) {\n    var $orig = _vm.__get_orig(order)\n    var g3 =\n      _vm.currentStatus !== \"\" && _vm.currentStatus !== \"completed\"\n        ? _vm.selectedOrderIds.includes(order.id)\n        : null\n    var m1 = _vm.getStatusClass(order.status)\n    var m2 = _vm.getStatusText(order.status)\n    return {\n      $orig: $orig,\n      g3: g3,\n      m1: m1,\n      m2: m2,\n    }\n  })\n  var g4 = _vm.loading && _vm.orders.length > 0\n  var g5 = _vm.orders.length === 0 && !_vm.loading\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        m0: m0,\n        g2: g2,\n        l0: l0,\n        g4: g4,\n        g5: g5,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"orders-container\">\r\n    <!-- çŠ¶æ€ç­›é€‰æ  -->\r\n    <scroll-view class=\"order-status-tabs-scroll\" scroll-x>\r\n      <view class=\"order-status-tabs\">\r\n        <view v-for=\"tab in statusTabs\" :key=\"tab.value\" :class=\"['order-status-tab', currentStatus === tab.value ? 'active' : '']\" @click=\"filterByStatus(tab.value)\">{{ tab.label }}</view>\r\n      </view>\r\n    </scroll-view>\r\n    <!-- æ‰¹é‡æ“ä½œæ  -->\r\n    <view v-if=\"orders.length && currentStatus !== '' && currentStatus !== 'completed'\" class=\"batch-bar-fixed\">\r\n      <view class=\"batch-left\">\r\n        <checkbox :checked=\"isAllSelected\" @click.stop=\"toggleSelectAll\" class=\"batch-all-checkbox\" />\r\n        <text class=\"batch-all-text\" @click.stop=\"toggleSelectAll\">å…¨é€‰</text>\r\n      </view>\r\n      <button class=\"batch-btn\" :disabled=\"!selectedOrderIds.length\" @click=\"batchDeliver\">{{ getBatchButtonText() }}</button>\r\n    </view>\r\n    <!-- è®¢å•åˆ—è¡¨ -->\r\n    <scroll-view \r\n      class=\"orders-list\" \r\n      :class=\"{ 'no-batch-bar': !(orders.length && currentStatus !== '' && currentStatus !== 'completed') }\"\r\n      scroll-y\r\n      @scrolltolower=\"onScrollToLower\"\r\n      :lower-threshold=\"50\"\r\n      :style=\"{ height: 'calc(100vh - 200rpx)' }\"\r\n    >\r\n      <view v-for=\"order in orders\" :key=\"order.id\" class=\"order-item\">\r\n        <checkbox v-if=\"currentStatus !== '' && currentStatus !== 'completed'\" :value=\"order.id\" :checked=\"selectedOrderIds.includes(order.id)\" @click.stop=\"toggleSelectOrder(order.id)\" class=\"order-checkbox\" />\r\n        <view class=\"order-content\" @click=\"viewOrderDetail(order.id)\">\r\n          <view class=\"order-header\">\r\n            <text class=\"order-id\">è®¢å•å·ï¼š{{ order.order_no }}</text>\r\n            <view :class=\"['order-status', getStatusClass(order.status)]\">{{ getStatusText(order.status) }}</view>\r\n          </view>\r\n          <view class=\"order-info\">\r\n            <text class=\"order-user\">{{ order.user_nickname || order.user_phone }}</text>\r\n            <text class=\"order-type\">{{ order.delivery_type === 'delivery' ? 'é…é€' : 'è‡ªå–' }}</text>\r\n          </view>\r\n          <view class=\"order-amount\">è®¢å•é‡‘é¢ï¼šÂ¥{{ order.total_amount }}</view>\r\n        </view>\r\n      </view>\r\n      \r\n      <!-- åŠ è½½çŠ¶æ€ -->\r\n      <view v-if=\"loading && orders.length > 0\" class=\"loading-more\">\r\n        <text class=\"loading-text\">åŠ è½½ä¸­...</text>\r\n      </view>\r\n      \r\n      <!-- æš‚æ— è®¢å•çŠ¶æ€ -->\r\n      <view v-if=\"orders.length === 0 && !loading\" class=\"empty-state\">\r\n        <view class=\"empty-icon\">ğŸ“‹</view>\r\n        <text class=\"empty-text\">æš‚æ— è®¢å•</text>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      orders: [],\r\n      currentStatus: '',\r\n      selectedOrderIds: [],\r\n      statusTabs: [\r\n        { label: 'å…¨éƒ¨', value: '' },\r\n        { label: 'å¾…ä»˜æ¬¾', value: 'pending' },\r\n        { label: 'å·²ä»˜æ¬¾', value: 'paid' },\r\n        { label: 'åˆ¶ä½œä¸­', value: 'preparing' },\r\n        { label: 'å¾…å–é¤', value: 'ready' },\r\n        { label: 'é…é€ä¸­', value: 'delivering' },\r\n        { label: 'å·²å®Œæˆ', value: 'completed' }\r\n      ],\r\n      currentPage: 1,\r\n      hasMore: true,\r\n      loading: false\r\n    };\r\n  },\r\n  computed: {\r\n    isAllSelected() {\r\n      return this.orders.length > 0 && this.selectedOrderIds.length === this.orders.length;\r\n    }\r\n  },\r\n  onLoad(options) {\r\n    if (options.status) {\r\n      this.currentStatus = options.status;\r\n    }\r\n    this.loadOrders();\r\n  },\r\n  methods: {\r\n    // åŠ è½½è®¢å•åˆ—è¡¨\r\n    loadOrders(reset = true) {\r\n      if (reset) {\r\n        this.orders = [];\r\n        this.currentPage = 1;\r\n        this.hasMore = true;\r\n      }\r\n      \r\n      if (this.loading || !this.hasMore) return;\r\n      \r\n      this.loading = true;\r\n      \r\n      let url = `http://localhost:3000/api/admin/orders?page=${this.currentPage}&limit=10`;\r\n      if (this.currentStatus) {\r\n        url += `&status=${this.currentStatus}`;\r\n      }\r\n      \r\n      uni.request({\r\n        url: url,\r\n        method: 'GET',\r\n        header: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        success: (res) => {\r\n          if (res.data && res.data.success) {\r\n            const newOrders = res.data.orders;\r\n            if (reset) {\r\n              this.orders = newOrders;\r\n            } else {\r\n              this.orders = [...this.orders, ...newOrders];\r\n            }\r\n            \r\n            this.hasMore = newOrders.length === 10;\r\n            this.currentPage++;\r\n          }\r\n        },\r\n        fail: () => {\r\n          uni.showToast({ title: 'åŠ è½½è®¢å•å¤±è´¥', icon: 'none' });\r\n        },\r\n        complete: () => {\r\n          this.loading = false;\r\n        }\r\n      });\r\n    },\r\n    \r\n    // ç­›é€‰è®¢å•çŠ¶æ€\r\n    filterByStatus(status) {\r\n      this.currentStatus = status;\r\n      this.selectedOrderIds = [];\r\n      this.loadOrders(true);\r\n    },\r\n    \r\n    // æ‰¹é‡é€‰æ‹©è®¢å•\r\n    onBatchSelect(e) {\r\n      this.selectedOrderIds = e.detail.value.map(id => Number(id));\r\n    },\r\n\r\n    // æ‰¹é‡æ“ä½œ\r\n    async batchDeliver() {\r\n      if (!this.selectedOrderIds.length) return;\r\n      const action = this.getBatchButtonText();\r\n      \r\n      // å…ˆéšè—å¯èƒ½å­˜åœ¨çš„loading\r\n      uni.hideLoading();\r\n      \r\n      try {\r\n        uni.showLoading({ title: action + '...' });\r\n        \r\n        let url = 'http://localhost:3000/api/admin/orders/batch-deliver';\r\n        let status = 'delivering';\r\n        if (this.currentStatus === 'pending') {\r\n          url = 'http://localhost:3000/api/admin/orders/batch-pay';\r\n          status = 'paid';\r\n        } else if (this.currentStatus === 'delivering') {\r\n          url = 'http://localhost:3000/api/admin/orders/batch-complete';\r\n          status = 'completed';\r\n        } else if (this.currentStatus === 'paid') {\r\n          url = 'http://localhost:3000/api/admin/orders/batch-prepare';\r\n          status = 'preparing';\r\n        } else if (this.currentStatus === 'preparing') {\r\n          url = 'http://localhost:3000/api/admin/orders/batch-ready';\r\n          status = 'ready';\r\n        }\r\n        \r\n        const result = await new Promise((resolve, reject) => {\r\n          uni.request({\r\n            url: url,\r\n            method: 'PUT',\r\n            header: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            data: { orderIds: this.selectedOrderIds },\r\n            success: (res) => {\r\n              resolve(res);\r\n            },\r\n            fail: (err) => {\r\n              reject(err);\r\n            }\r\n          });\r\n        });\r\n        \r\n        uni.hideLoading();\r\n        \r\n        if (result.data && result.data.success) {\r\n          uni.showToast({ title: action + 'æˆåŠŸ', icon: 'success' });\r\n          this.selectedOrderIds = [];\r\n          this.loadOrders(true);\r\n        } else {\r\n          uni.showToast({ title: result.data?.message || action + 'å¤±è´¥', icon: 'none' });\r\n        }\r\n      } catch (error) {\r\n        uni.hideLoading();\r\n        console.error('æ‰¹é‡æ“ä½œå¤±è´¥:', error);\r\n        uni.showToast({ title: action + 'å¤±è´¥', icon: 'none' });\r\n      }\r\n    },\r\n    \r\n    // æ›´æ–°è®¢å•çŠ¶æ€\r\n    updateOrderStatus(orderId, status) {\r\n      uni.request({\r\n        url: `http://localhost:3000/api/admin/orders/${orderId}/status`,\r\n        method: 'PUT',\r\n        header: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        data: { status },\r\n        success: (res) => {\r\n          if (res.data && res.data.success) {\r\n            uni.showToast({ title: 'çŠ¶æ€æ›´æ–°æˆåŠŸ', icon: 'success' });\r\n            // é‡æ–°åŠ è½½è®¢å•åˆ—è¡¨\r\n            this.loadOrders(true);\r\n          } else {\r\n            uni.showToast({ title: res.data.message || 'æ›´æ–°å¤±è´¥', icon: 'none' });\r\n          }\r\n        },\r\n        fail: () => {\r\n          uni.showToast({ title: 'ç½‘ç»œé”™è¯¯', icon: 'none' });\r\n        }\r\n      });\r\n    },\r\n    \r\n    // æŸ¥çœ‹è®¢å•è¯¦æƒ…\r\n    viewOrderDetail(orderId) {\r\n      uni.navigateTo({ url: `/pkg_admin/orders/detail?orderId=${orderId}` });\r\n    },\r\n    \r\n    // è·å–çŠ¶æ€æ–‡æœ¬\r\n    getStatusText(status) {\r\n      const statusMap = {\r\n        'pending': 'å¾…ä»˜æ¬¾',\r\n        'paid': 'å·²ä»˜æ¬¾',\r\n        'preparing': 'åˆ¶ä½œä¸­',\r\n        'ready': 'å¾…å–é¤',\r\n        'delivering': 'é…é€ä¸­',\r\n        'completed': 'å·²å®Œæˆ',\r\n        'cancelled': 'å·²å–æ¶ˆ'\r\n      };\r\n      return statusMap[status] || status;\r\n    },\r\n    \r\n    // è·å–çŠ¶æ€æ ·å¼ç±»\r\n    getStatusClass(status) {\r\n      const classMap = {\r\n        'pending': 'status-pending',\r\n        'paid': 'status-paid',\r\n        'preparing': 'status-preparing',\r\n        'ready': 'status-ready',\r\n        'completed': 'status-completed',\r\n        'cancelled': 'status-cancelled'\r\n      };\r\n      return classMap[status] || '';\r\n    },\r\n    \r\n    // æ ¼å¼åŒ–æ—¶é—´\r\n    formatTime(timeStr) {\r\n      const date = new Date(timeStr);\r\n      const now = new Date();\r\n      const diff = now - date;\r\n      \r\n      if (diff < 60000) { // 1åˆ†é’Ÿå†…\r\n        return 'åˆšåˆš';\r\n      } else if (diff < 3600000) { // 1å°æ—¶å†…\r\n        return `${Math.floor(diff / 60000)}åˆ†é’Ÿå‰`;\r\n      } else if (diff < 86400000) { // 1å¤©å†…\r\n        return `${Math.floor(diff / 3600000)}å°æ—¶å‰`;\r\n      } else {\r\n        return date.toLocaleDateString();\r\n      }\r\n    },\r\n    toggleSelectOrder(orderId) {\r\n      const idx = this.selectedOrderIds.indexOf(orderId);\r\n      if (idx > -1) {\r\n        this.selectedOrderIds.splice(idx, 1);\r\n      } else {\r\n        this.selectedOrderIds.push(orderId);\r\n      }\r\n    },\r\n    toggleSelectAll() {\r\n      if (this.isAllSelected) {\r\n        this.selectedOrderIds = [];\r\n      } else {\r\n        this.selectedOrderIds = this.orders.map(o => o.id);\r\n      }\r\n    },\r\n    getBatchButtonText() {\r\n      if (this.currentStatus === 'pending') return 'æ‰¹é‡ç¡®è®¤ä»˜æ¬¾';\r\n      if (this.currentStatus === 'ready') return 'æ‰¹é‡é…é€ä¸­';\r\n      if (this.currentStatus === 'delivering') return 'æ‰¹é‡å®Œæˆ';\r\n      if (this.currentStatus === 'paid') return 'æ‰¹é‡åˆ¶ä½œä¸­';\r\n      if (this.currentStatus === 'preparing') return 'æ‰¹é‡å¾…å–é¤';\r\n      return 'æ‰¹é‡æ“ä½œ';\r\n    },\r\n    getActionButtonText(status) {\r\n      if (status === 'pending') return 'ç¡®è®¤ä»˜æ¬¾';\r\n      if (status === 'paid') return 'å¼€å§‹åˆ¶ä½œ';\r\n      if (status === 'preparing') return 'åˆ¶ä½œå®Œæˆ';\r\n      if (status === 'ready') return 'ç¡®è®¤å®Œæˆ';\r\n      if (status === 'delivering') return 'æ‰¹é‡å®Œæˆ';\r\n      if (status === 'completed') return 'æ‰¹é‡å®Œæˆ';\r\n      if (status === 'cancelled') return 'å–æ¶ˆè®¢å•';\r\n      return 'æ“ä½œ';\r\n    },\r\n    getNextStatus(currentStatus) {\r\n      if (currentStatus === 'pending') return 'paid';\r\n      if (currentStatus === 'paid') return 'preparing';\r\n      if (currentStatus === 'preparing') return 'ready';\r\n      if (currentStatus === 'ready') return 'completed';\r\n      if (currentStatus === 'delivering') return 'completed';\r\n      if (currentStatus === 'completed') return 'completed';\r\n      if (currentStatus === 'cancelled') return 'cancelled';\r\n      return currentStatus;\r\n    },\r\n    onScrollToLower() {\r\n      console.log('æ»‘åŠ¨åˆ°åº•éƒ¨ï¼Œè§¦å‘åŠ è½½æ›´å¤š');\r\n      if (this.loading || !this.hasMore) {\r\n        console.log('æ­£åœ¨åŠ è½½æˆ–æ²¡æœ‰æ›´å¤šæ•°æ®ï¼Œè·³è¿‡');\r\n        return;\r\n      }\r\n      console.log('å¼€å§‹åŠ è½½æ›´å¤šè®¢å•');\r\n      this.loadOrders(false);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.orders-container {\r\n  min-height: 100vh;\r\n  background: #f8f9fa;\r\n  padding-top: 120rpx;\r\n}\r\n\r\n.order-status-tabs-scroll {\r\n  width: 100vw;\r\n  overflow-x: auto;\r\n  background: #fff;\r\n  border-bottom: 1rpx solid #e9ecef;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.order-status-tabs {\r\n  display: flex;\r\n  gap: 12rpx;\r\n  padding: 16rpx 24rpx 0 24rpx;\r\n}\r\n\r\n.order-status-tab {\r\n  font-size: 26rpx;\r\n  color: #6c757d;\r\n  padding: 12rpx 24rpx;\r\n  border-radius: 20rpx;\r\n  background: #f8f9fa;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  margin-bottom: 12rpx;\r\n  white-space: nowrap;\r\n  border: 1rpx solid transparent;\r\n}\r\n\r\n.order-status-tab.active {\r\n  background: #007aff;\r\n  color: #fff;\r\n  font-weight: 500;\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 122, 255, 0.3);\r\n}\r\n\r\n.batch-bar-fixed {\r\n  position: fixed;\r\n  top: 80rpx;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 99;\r\n  background: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20rpx 24rpx;\r\n  border-bottom: 1rpx solid #e9ecef;\r\n  box-shadow: 0 1rpx 3rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.batch-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.batch-all-checkbox {\r\n  margin-right: 1rpx;\r\n}\r\n\r\n.batch-all-text {\r\n  font-size: 28rpx;\r\n  color: #495057;\r\n  font-weight: 500;\r\n}\r\n\r\n.batch-btn {\r\n  margin-right: 10rpx;\r\n  background: #007aff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 12rpx;\r\n  padding: 12rpx 24rpx;\r\n  font-size: 26rpx;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 122, 255, 0.2);\r\n}\r\n\r\n.batch-btn:disabled {\r\n  background: #dee2e6;\r\n  color: #adb5bd;\r\n  box-shadow: none;\r\n}\r\n\r\n.orders-list {\r\n  padding: 24rpx;\r\n  padding-top: 130rpx;\r\n  height: calc(100vh - 200rpx);\r\n  overflow-y: auto;\r\n}\r\n\r\n.orders-list.no-batch-bar {\r\n  padding-top: 30rpx;\r\n}\r\n\r\n.order-item {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  margin-bottom: 20rpx;\r\n  padding: 24rpx;\r\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.06);\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 20rpx;\r\n  transition: all 0.3s ease;\r\n  border: 1rpx solid #f1f3f4;\r\n}\r\n\r\n.order-item:hover {\r\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\r\n  transform: translateY(-2rpx);\r\n}\r\n\r\n.order-checkbox {\r\n  margin-top: 8rpx;\r\n}\r\n\r\n.order-content {\r\n  flex: 1;\r\n  position: relative;\r\n}\r\n\r\n.order-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.order-id {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #212529;\r\n}\r\n\r\n.order-status {\r\n  padding: 6rpx 16rpx;\r\n  border-radius: 16rpx;\r\n  font-size: 22rpx;\r\n  font-weight: 500;\r\n  text-align: center;\r\n  min-width: 80rpx;\r\n}\r\n\r\n.order-status.pending { \r\n  background: #fff3cd; \r\n  color: #856404; \r\n  border: 1rpx solid #ffeaa7;\r\n}\r\n\r\n.order-status.paid { \r\n  background: #d1ecf1; \r\n  color: #0c5460; \r\n  border: 1rpx solid #bee5eb;\r\n}\r\n\r\n.order-status.preparing { \r\n  background: #f8d7da; \r\n  color: #721c24; \r\n  border: 1rpx solid #f5c6cb;\r\n}\r\n\r\n.order-status.ready { \r\n  background: #d4edda; \r\n  color: #155724; \r\n  border: 1rpx solid #c3e6cb;\r\n}\r\n\r\n.order-status.delivering { \r\n  background: #e2e3e5; \r\n  color: #383d41; \r\n  border: 1rpx solid #d6d8db;\r\n}\r\n\r\n.order-status.completed { \r\n  background: #d1ecf1; \r\n  color: #0c5460; \r\n  border: 1rpx solid #bee5eb;\r\n}\r\n\r\n.order-info {\r\n  display: flex;\r\n  gap: 24rpx;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.order-user, .order-type {\r\n  font-size: 26rpx;\r\n  color: #6c757d;\r\n  font-weight: 400;\r\n}\r\n\r\n.order-type {\r\n  background: #e6f7ff;\r\n  color: #1890ff;\r\n  padding: 4rpx 12rpx;\r\n  border-radius: 12rpx;\r\n  white-space: nowrap;\r\n  display: inline-block;\r\n  min-width: 60rpx;\r\n  text-align: center;\r\n  line-height: 1.2;\r\n}\r\n\r\n.order-amount {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: #dc3545;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.order-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: flex-end;\r\n}\r\n\r\n.action-btn {\r\n  background: #007aff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 12rpx;\r\n  padding: 10rpx 20rpx;\r\n  font-size: 24rpx;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 122, 255, 0.2);\r\n}\r\n\r\n.action-btn:hover {\r\n  background: #0056b3;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 122, 255, 0.3);\r\n}\r\n\r\n.action-btn.detail {\r\n  background: #6c757d;\r\n  box-shadow: 0 2rpx 8rpx rgba(108, 117, 125, 0.2);\r\n}\r\n\r\n.action-btn.detail:hover {\r\n  background: #545b62;\r\n  box-shadow: 0 4rpx 12rpx rgba(108, 117, 125, 0.3);\r\n}\r\n\r\n.action-btn.cancel {\r\n  background: #dc3545;\r\n  box-shadow: 0 2rpx 8rpx rgba(220, 53, 69, 0.2);\r\n}\r\n\r\n.action-btn.cancel:hover {\r\n  background: #c82333;\r\n  box-shadow: 0 4rpx 12rpx rgba(220, 53, 69, 0.3);\r\n}\r\n\r\n/* ç©ºçŠ¶æ€ */\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 120rpx 24rpx;\r\n  color: #6c757d;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 80rpx;\r\n  margin-bottom: 24rpx;\r\n  opacity: 0.5;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 32rpx;\r\n  color: #495057;\r\n  font-weight: 500;\r\n  margin-bottom: 12rpx;\r\n  display: block;\r\n}\r\n\r\n/* åŠ è½½çŠ¶æ€ */\r\n.loading-more {\r\n  text-align: center;\r\n  padding: 40rpx;\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-text {\r\n  font-size: 26rpx;\r\n  color: #adb5bd;\r\n}\r\n\r\n/* å“åº”å¼è®¾è®¡ */\r\n@media (max-width: 750rpx) {\r\n  .order-status-tabs {\r\n    gap: 8rpx;\r\n    padding: 12rpx 16rpx 0 16rpx;\r\n  }\r\n  \r\n  .order-status-tab {\r\n    font-size: 24rpx;\r\n    padding: 10rpx 20rpx;\r\n  }\r\n  \r\n  .orders-list {\r\n    padding: 16rpx;\r\n    padding-top: 160rpx;\r\n  }\r\n  \r\n  .order-item {\r\n    padding: 20rpx;\r\n    margin-bottom: 16rpx;\r\n  }\r\n}\r\n</style> ","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=style&index=0&id=1d563304&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orders.vue?vue&type=style&index=0&id=1d563304&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1753800639761\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}