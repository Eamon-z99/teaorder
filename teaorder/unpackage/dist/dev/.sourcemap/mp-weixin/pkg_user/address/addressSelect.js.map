{"version":3,"sources":["uni-app:///main.js","webpack:///D:/uniapp_project/food/pkg_user/address/addressSelect.vue?43e0","webpack:///D:/uniapp_project/food/pkg_user/address/addressSelect.vue?4810","webpack:///D:/uniapp_project/food/pkg_user/address/addressSelect.vue?2b55","webpack:///D:/uniapp_project/food/pkg_user/address/addressSelect.vue?be6c","uni-app:///pkg_user/address/addressSelect.vue","webpack:///D:/uniapp_project/food/pkg_user/address/addressSelect.vue?5f27","webpack:///D:/uniapp_project/food/pkg_user/address/addressSelect.vue?dcfb"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","console","data","searchKeyword","selectedLocation","selectedAddress","searchResults","searchTimer","mapCenter","latitude","longitude","markers","commonAddresses","name","address","location","onLoad","uni","title","icon","methods","getCurrentLocation","type","success","fail","content","showCancel","confirmText","duration","onSearchInput","clearTimeout","clearSearch","searchAddress","url","params","query","radius","output","ak","queryString","map","join","method","res","distance","selectSearchResult","selectCommonAddress","reverseGeocode","result","onMapTap","onMarkerTap","onRegionChange","updateMarkers","id","iconPath","width","height","cancelSelect","confirmSelect","prevPage"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsI;AACtI;AACiE;AACL;AACqC;;;AAGjG;AAC6K;AAC7K,gBAAgB,uLAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,oGAAM;AACR,EAAE,6GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7BA;AAAA;AAAA;AAAA;AAA4pB,CAAgB,yqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkHhrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEAC;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QAAAC;QAAAC;MAAA;MAAA;MACAC;MAAA;MACAC,kBACA;QACAC;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;UAAAN;UAAAC;QAAA;MACA,GACA;QACAG;QACAC;QACAC;UAAAN;UAAAC;QAAA;MACA;IAEA;EACA;EAEAM;IACA;IACAf;IAEA;MACAgB;QACAC;QACAC;MACA;MACA;IACA;;IAEA;IACA;EACA;EAEAC;IACA;IACAC;MAAA;MACAJ;QAAAC;MAAA;MAEAD;QACAK;QACAC;UACA;YACAd;YACAC;UACA;UACA;YACAD;YACAC;UACA;;UAEA;UACA;;UAEA;UACA;YACAD;YACAC;UACA;;UAEA;UACA;UAEAO;UACAA;YAAAC;YAAAC;UAAA;QACA;QACAK;UACAvB;UACAgB;;UAEA;UACA;YACAA;cACAC;cACAO;cACAC;cACAC;YACA;UACA;YACAV;cACAC;cACAC;cACAS;YACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACAC;MACA;MAEA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAGA;gBACAC;gBACAC;kBACAC;kBACApB;kBAAA;kBACAqB;kBACAC;kBACAC;gBACA;gBAEAC,kCACAC;kBAAA;gBAAA,GACAC;gBAAA;gBAAA,OAEAxB;kBACAgB;kBACAS;gBACA;cAAA;gBAHAC;gBAKA;kBACA;oBAAA;sBACAzB;sBACAJ;sBACAC;wBACAN;wBACAC;sBACA;sBACAkC;oBACA;kBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA3C;gBACA;gBACA,wBACA;kBACAiB;kBACAJ;kBACAC;oBAAAN;oBAAAC;kBAAA;kBACAkC;gBACA,EACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MAEA;IACA;IAEA;IACAC;MACA;QACA;QACA;QACA;QACA;QACA7B;UAAAC;UAAAC;QAAA;MACA;QACAF;UAAAC;UAAAC;QAAA;MACA;IACA;IAEA;IACA4B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAd;gBACAC;kBACAnB;kBACAsB;kBACAC;gBACA;gBAEAC,kCACAC;kBAAA;gBAAA,GACAC;gBAAA;gBAAA,OAEAxB;kBACAgB;kBACAS;gBACA;cAAA;gBAHAC;gBAKA;kBACAK;kBACA;;kBAEA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA/C;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAgD;MACA;QAAAxC;QAAAC;MACA;QAAAD;QAAAC;MAAA;MACA;MACA;IACA;IAEA;IACAwC;MACA;QACAzC;QACAC;MACA;MACA;MACA;MACA;IACA;IAEA;IACAyC;MACA;QACA;UAAA1C;UAAAC;QACA;UAAAD;UAAAC;QAAA;QACA;QACA;MACA;IACA;IAEA;IACA0C;MACA;QACA;UACAC;UACA5C;UACAC;UACAQ;UACAoC;UACAC;UACAC;QACA;MACA;IACA;IAEA;IACAC;MACAxC;IACA;IAEA;IACAyC;MACA;QACAzC;UAAAC;UAAAC;QAAA;QACA;MACA;;MAEA;MACA;QACAV;QACAC;QACAI;MACA;;MAEA;MACA;MACA;MAEA;QACA6C;MACA;MAEA1C;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnaA;AAAA;AAAA;AAAA;AAA29B,CAAgB,08BAAG,EAAC,C;;;;;;;;;;;ACA/+B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pkg_user/address/addressSelect.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pkg_user/address/addressSelect.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./addressSelect.vue?vue&type=template&id=43fcd552&scoped=true&\"\nvar renderjs\nimport script from \"./addressSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./addressSelect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addressSelect.vue?vue&type=style&index=0&id=43fcd552&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43fcd552\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pkg_user/address/addressSelect.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressSelect.vue?vue&type=template&id=43fcd552&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.selectedLocation\n    ? _vm.selectedLocation.latitude.toFixed(6)\n    : null\n  var g1 = _vm.selectedLocation\n    ? _vm.selectedLocation.longitude.toFixed(6)\n    : null\n  var g2 = _vm.searchResults.length\n  var g3 = g2 > 0 ? _vm.searchResults.length : null\n  var g4 = !_vm.searchKeyword && _vm.searchResults.length === 0\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressSelect.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"address-select-page\">\r\n    <!-- æœç´¢æ  -->\r\n    <view class=\"search-bar\">\r\n      <view class=\"search-input-wrapper\">\r\n        <text class=\"search-icon\">ğŸ”</text>\r\n        <input \r\n          v-model=\"searchKeyword\" \r\n          placeholder=\"æœç´¢åœ°å€\" \r\n          class=\"search-input\"\r\n          @input=\"onSearchInput\"\r\n        />\r\n        <text v-if=\"searchKeyword\" class=\"clear-btn\" @click=\"clearSearch\">Ã—</text>\r\n      </view>\r\n      <button class=\"current-location-btn\" @click=\"getCurrentLocation\">\r\n        <text class=\"location-icon\">ğŸ“</text>\r\n        <text class=\"location-text\">å®šä½</text>\r\n      </button>\r\n    </view>\r\n\r\n    <!-- åœ°å›¾å®¹å™¨ -->\r\n    <view class=\"map-container\">\r\n      <map\r\n        id=\"addressMap\"\r\n        class=\"map\"\r\n        :latitude=\"mapCenter.latitude\"\r\n        :longitude=\"mapCenter.longitude\"\r\n        :markers=\"markers\"\r\n        :scale=\"16\"\r\n        :show-location=\"true\"\r\n        :enable-zoom=\"true\"\r\n        :enable-scroll=\"true\"\r\n        :enable-rotate=\"false\"\r\n        @markertap=\"onMarkerTap\"\r\n        @regionchange=\"onRegionChange\"\r\n        @tap=\"onMapTap\"\r\n      ></map>\r\n      \r\n      <!-- åœ°å›¾ä¸­å¿ƒç‚¹æŒ‡ç¤ºå™¨ -->\r\n      <view class=\"map-center-indicator\">\r\n        <text class=\"center-icon\">ğŸ“</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- åœ°å€ä¿¡æ¯é¢æ¿ -->\r\n    <view class=\"address-panel\">\r\n      <view class=\"panel-header\">\r\n        <text class=\"panel-title\">é€‰æ‹©åœ°å€</text>\r\n        <text class=\"panel-subtitle\">{{ selectedAddress || 'æœç´¢æˆ–é€‰æ‹©åœ°å€' }}</text>\r\n      </view>\r\n      \r\n      <view class=\"address-details\" v-if=\"selectedLocation\">\r\n        <view class=\"detail-item\">\r\n          <text class=\"detail-label\">è¯¦ç»†åœ°å€ï¼š</text>\r\n          <text class=\"detail-value\">{{ selectedAddress }}</text>\r\n        </view>\r\n        <view class=\"detail-item\">\r\n          <text class=\"detail-label\">ç»çº¬åº¦ï¼š</text>\r\n          <text class=\"detail-value\">{{ selectedLocation.latitude.toFixed(6) }}, {{ selectedLocation.longitude.toFixed(6) }}</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <view class=\"panel-actions\">\r\n        <button class=\"action-btn cancel-btn\" @click=\"cancelSelect\">å–æ¶ˆ</button>\r\n        <button class=\"action-btn confirm-btn\" @click=\"confirmSelect\" :disabled=\"!selectedLocation\">ç¡®è®¤é€‰æ‹©</button>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- æœç´¢ç»“æœåˆ—è¡¨ -->\r\n    <view v-if=\"searchResults.length > 0\" class=\"search-results\">\r\n      <view class=\"results-header\">\r\n        <text class=\"results-title\">æœç´¢ç»“æœ</text>\r\n        <text class=\"results-count\">({{ searchResults.length }})</text>\r\n      </view>\r\n      <view class=\"results-list\">\r\n        <view \r\n          v-for=\"(result, index) in searchResults\" \r\n          :key=\"index\"\r\n          class=\"result-item\"\r\n          @click=\"selectSearchResult(result)\"\r\n        >\r\n          <view class=\"result-info\">\r\n            <text class=\"result-title\">{{ result.title }}</text>\r\n            <text class=\"result-address\">{{ result.address }}</text>\r\n          </view>\r\n          <text class=\"result-distance\">{{ result.distance }}km</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- å¸¸ç”¨åœ°å€åˆ—è¡¨ -->\r\n    <view v-if=\"!searchKeyword && searchResults.length === 0\" class=\"common-addresses\">\r\n      <view class=\"common-header\">\r\n        <text class=\"common-title\">å¸¸ç”¨åœ°å€</text>\r\n      </view>\r\n      <view class=\"common-list\">\r\n        <view \r\n          v-for=\"(address, index) in commonAddresses\" \r\n          :key=\"index\"\r\n          class=\"common-item\"\r\n          @click=\"selectCommonAddress(address)\"\r\n        >\r\n          <view class=\"common-info\">\r\n            <text class=\"common-name\">{{ address.name }}</text>\r\n            <text class=\"common-address\">{{ address.address }}</text>\r\n          </view>\r\n          <text class=\"common-icon\">ğŸ“</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { baiduMapConfig } from '../../config.js';\r\n\r\nconsole.log('ç™¾åº¦åœ°å›¾é…ç½®:', baiduMapConfig);\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchKeyword: '',\r\n      selectedLocation: null,\r\n      selectedAddress: '',\r\n      searchResults: [],\r\n      searchTimer: null,\r\n      mapCenter: { latitude: 39.908823, longitude: 116.397470 }, // åœ°å›¾ä¸­å¿ƒç‚¹\r\n      markers: [], // åœ°å›¾æ ‡è®°ç‚¹\r\n      commonAddresses: [\r\n        {\r\n          name: 'å½“å‰ä½ç½®',\r\n          address: 'æ­£åœ¨è·å–...',\r\n          location: null\r\n        },\r\n        {\r\n          name: 'å…¬å¸',\r\n          address: 'åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½é—¨å¤–å¤§è¡—1å·',\r\n          location: { latitude: 39.908823, longitude: 116.397470 }\r\n        },\r\n        {\r\n          name: 'å®¶',\r\n          address: 'åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å·',\r\n          location: { latitude: 39.9837, longitude: 116.3229 }\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  \r\n  onLoad() {\r\n    // éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®åŠ è½½\r\n    console.log('åœ°å€é€‰æ‹©é¡µé¢åŠ è½½ï¼Œç™¾åº¦åœ°å›¾é…ç½®:', baiduMapConfig);\r\n    \r\n    if (!baiduMapConfig || !baiduMapConfig.ak) {\r\n      uni.showToast({ \r\n        title: 'ç™¾åº¦åœ°å›¾é…ç½®é”™è¯¯', \r\n        icon: 'none' \r\n      });\r\n      return;\r\n    }\r\n    \r\n    // è·å–å½“å‰ä½ç½®\r\n    this.getCurrentLocation();\r\n  },\r\n  \r\n  methods: {\r\n    // è·å–å½“å‰ä½ç½®\r\n    getCurrentLocation() {\r\n      uni.showLoading({ title: 'å®šä½ä¸­...' });\r\n      \r\n      uni.getLocation({\r\n        type: 'gcj02',\r\n        success: (res) => {\r\n          this.mapCenter = {\r\n            latitude: res.latitude,\r\n            longitude: res.longitude\r\n          };\r\n          this.selectedLocation = {\r\n            latitude: res.latitude,\r\n            longitude: res.longitude\r\n          };\r\n          \r\n          // æ ¹æ®åæ ‡è·å–åœ°å€ä¿¡æ¯\r\n          this.reverseGeocode(res.latitude, res.longitude);\r\n          \r\n          // æ›´æ–°å¸¸ç”¨åœ°å€ä¸­çš„å½“å‰ä½ç½®\r\n          this.commonAddresses[0].location = {\r\n            latitude: res.latitude,\r\n            longitude: res.longitude\r\n          };\r\n          \r\n          // æ›´æ–°åœ°å›¾æ ‡è®°\r\n          this.updateMarkers();\r\n          \r\n          uni.hideLoading();\r\n          uni.showToast({ title: 'å®šä½æˆåŠŸ', icon: 'success' });\r\n        },\r\n        fail: (err) => {\r\n          console.error('å®šä½å¤±è´¥:', err);\r\n          uni.hideLoading();\r\n          \r\n          // æ ¹æ®é”™è¯¯ç±»å‹æ˜¾ç¤ºä¸åŒçš„æç¤º\r\n          if (err.errMsg && err.errMsg.includes('permission')) {\r\n            uni.showModal({\r\n              title: 'éœ€è¦ä½ç½®æƒé™',\r\n              content: 'è¯·åœ¨è®¾ç½®ä¸­å…è®¸è·å–ä½ç½®ä¿¡æ¯ï¼Œä»¥ä¾¿ä¸ºæ‚¨æä¾›æ›´å¥½çš„æœåŠ¡',\r\n              showCancel: false,\r\n              confirmText: 'æˆ‘çŸ¥é“äº†'\r\n            });\r\n          } else {\r\n            uni.showToast({ \r\n              title: 'å®šä½å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©åœ°å€', \r\n              icon: 'none',\r\n              duration: 2000\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    // æœç´¢è¾“å…¥å¤„ç†\r\n    onSearchInput() {\r\n      if (this.searchTimer) {\r\n        clearTimeout(this.searchTimer);\r\n      }\r\n      \r\n      this.searchTimer = setTimeout(() => {\r\n        if (this.searchKeyword.trim()) {\r\n          this.searchAddress();\r\n        } else {\r\n          this.searchResults = [];\r\n        }\r\n      }, 500);\r\n    },\r\n    \r\n    // æ¸…é™¤æœç´¢\r\n    clearSearch() {\r\n      this.searchKeyword = '';\r\n      this.searchResults = [];\r\n    },\r\n    \r\n    // æœç´¢åœ°å€\r\n    async searchAddress() {\r\n      if (!this.searchKeyword.trim()) return;\r\n      \r\n      try {\r\n        // ä½¿ç”¨ç™¾åº¦åœ°å›¾APIæœç´¢åœ°å€\r\n        const url = `${baiduMapConfig.baseUrl}/place/v2/search`;\r\n        const params = {\r\n          query: this.searchKeyword,\r\n          location: '39.908823,116.397470', // é»˜è®¤åŒ—äº¬\r\n          radius: 5000,\r\n          output: 'json',\r\n          ak: baiduMapConfig.ak\r\n        };\r\n        \r\n        const queryString = Object.keys(params)\r\n          .map(key => `${key}=${encodeURIComponent(params[key])}`)\r\n          .join('&');\r\n        \r\n        const res = await uni.request({\r\n          url: `${url}?${queryString}`,\r\n          method: 'GET'\r\n        });\r\n        \r\n        if (res.data && res.data.results) {\r\n          this.searchResults = res.data.results.map(item => ({\r\n            title: item.name,\r\n            address: item.address,\r\n            location: {\r\n              latitude: item.location.lat,\r\n              longitude: item.location.lng\r\n            },\r\n            distance: (item.distance / 1000).toFixed(1)\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error('æœç´¢åœ°å€å¤±è´¥:', error);\r\n        // å¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\r\n        this.searchResults = [\r\n          {\r\n            title: this.searchKeyword,\r\n            address: `${this.searchKeyword}é™„è¿‘`,\r\n            location: { latitude: 39.908823, longitude: 116.397470 },\r\n            distance: '0.1'\r\n          }\r\n        ];\r\n      }\r\n    },\r\n    \r\n    // é€‰æ‹©æœç´¢ç»“æœ\r\n    selectSearchResult(result) {\r\n      this.mapCenter = result.location;\r\n      this.selectedLocation = result.location;\r\n      this.selectedAddress = result.address;\r\n      this.searchResults = [];\r\n      this.searchKeyword = result.title;\r\n      \r\n      this.updateMarkers();\r\n    },\r\n    \r\n    // é€‰æ‹©å¸¸ç”¨åœ°å€\r\n    selectCommonAddress(address) {\r\n      if (address.location) {\r\n        this.mapCenter = address.location;\r\n        this.selectedLocation = address.location;\r\n        this.selectedAddress = address.address;\r\n        this.updateMarkers();\r\n        uni.showToast({ title: `å·²é€‰æ‹©${address.name}`, icon: 'success' });\r\n      } else {\r\n        uni.showToast({ title: 'æ­£åœ¨è·å–ä½ç½®ä¿¡æ¯', icon: 'none' });\r\n      }\r\n    },\r\n    \r\n    // é€†åœ°ç†ç¼–ç ï¼ˆåæ ‡è½¬åœ°å€ï¼‰\r\n    async reverseGeocode(latitude, longitude) {\r\n      try {\r\n        const url = `${baiduMapConfig.baseUrl}/reverse_geocoding/v3`;\r\n        const params = {\r\n          location: `${latitude},${longitude}`,\r\n          output: 'json',\r\n          ak: baiduMapConfig.ak\r\n        };\r\n        \r\n        const queryString = Object.keys(params)\r\n          .map(key => `${key}=${encodeURIComponent(params[key])}`)\r\n          .join('&');\r\n        \r\n        const res = await uni.request({\r\n          url: `${url}?${queryString}`,\r\n          method: 'GET'\r\n        });\r\n        \r\n        if (res.data && res.data.result) {\r\n          const result = res.data.result;\r\n          this.selectedAddress = result.formatted_address || 'æœªçŸ¥åœ°å€';\r\n          \r\n          // æ›´æ–°å¸¸ç”¨åœ°å€ä¸­çš„å½“å‰ä½ç½®\r\n          this.commonAddresses[0].address = result.formatted_address || 'å½“å‰ä½ç½®';\r\n        }\r\n      } catch (error) {\r\n        console.error('é€†åœ°ç†ç¼–ç å¤±è´¥:', error);\r\n        this.selectedAddress = 'æœªçŸ¥åœ°å€';\r\n      }\r\n    },\r\n    \r\n    // åœ°å›¾ç‚¹å‡»äº‹ä»¶\r\n    onMapTap(e) {\r\n      const { latitude, longitude } = e.detail;\r\n      this.selectedLocation = { latitude, longitude };\r\n      this.reverseGeocode(latitude, longitude);\r\n      this.updateMarkers();\r\n    },\r\n\r\n    // åœ°å›¾æ ‡è®°ç‚¹ç‚¹å‡»äº‹ä»¶\r\n    onMarkerTap(e) {\r\n      this.selectedLocation = {\r\n        latitude: e.detail.latitude,\r\n        longitude: e.detail.longitude\r\n      };\r\n      this.selectedAddress = 'ç‚¹å‡»åœ°å›¾é€‰æ‹©ä½ç½®';\r\n      this.searchResults = [];\r\n      this.searchKeyword = '';\r\n    },\r\n\r\n    // åœ°å›¾åŒºåŸŸå˜åŒ–äº‹ä»¶\r\n    onRegionChange(e) {\r\n      if (e.type === 'end' && e.detail.centerLocation) {\r\n        const { latitude, longitude } = e.detail.centerLocation;\r\n        this.selectedLocation = { latitude, longitude };\r\n        this.reverseGeocode(latitude, longitude);\r\n        this.updateMarkers();\r\n      }\r\n    },\r\n    \r\n    // æ›´æ–°åœ°å›¾æ ‡è®°\r\n    updateMarkers() {\r\n      if (this.selectedLocation) {\r\n        this.markers = [{\r\n          id: 1,\r\n          latitude: this.selectedLocation.latitude,\r\n          longitude: this.selectedLocation.longitude,\r\n          title: 'é€‰æ‹©çš„ä½ç½®',\r\n          iconPath: '/static/images/map-marker.png',\r\n          width: 32,\r\n          height: 32\r\n        }];\r\n      }\r\n    },\r\n    \r\n    // å–æ¶ˆé€‰æ‹©\r\n    cancelSelect() {\r\n      uni.navigateBack();\r\n    },\r\n    \r\n    // ç¡®è®¤é€‰æ‹©\r\n    confirmSelect() {\r\n      if (!this.selectedLocation) {\r\n        uni.showToast({ title: 'è¯·å…ˆé€‰æ‹©ä½ç½®', icon: 'none' });\r\n        return;\r\n      }\r\n      \r\n      // è¿”å›é€‰æ‹©çš„åœ°å€ä¿¡æ¯\r\n      const addressInfo = {\r\n        latitude: this.selectedLocation.latitude,\r\n        longitude: this.selectedLocation.longitude,\r\n        address: this.selectedAddress\r\n      };\r\n      \r\n      // é€šè¿‡é¡µé¢å‚æ•°ä¼ é€’æ•°æ®\r\n      const pages = getCurrentPages();\r\n      const prevPage = pages[pages.length - 2];\r\n      \r\n      if (prevPage && prevPage.$vm && prevPage.$vm.updateLocationFromMap) {\r\n        prevPage.$vm.updateLocationFromMap(addressInfo);\r\n      }\r\n      \r\n      uni.navigateBack();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.address-select-page {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.search-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx 24rpx;\r\n  background: #fff;\r\n  border-bottom: 1rpx solid #e8e8e8;\r\n  gap: 16rpx;\r\n}\r\n\r\n.search-input-wrapper {\r\n  flex: 1;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  background: #f5f5f5;\r\n  border-radius: 24rpx;\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.search-icon {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n  margin-right: 12rpx;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  height: 72rpx;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  background: transparent;\r\n}\r\n\r\n.clear-btn {\r\n  font-size: 32rpx;\r\n  color: #999;\r\n  padding: 8rpx;\r\n  cursor: pointer;\r\n}\r\n\r\n.current-location-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #1890ff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 24rpx;\r\n  padding: 16rpx 24rpx;\r\n  font-size: 26rpx;\r\n  gap: 8rpx;\r\n}\r\n\r\n.location-icon {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.map-container {\r\n  flex: 1;\r\n  position: relative;\r\n  background: #e8e8e8;\r\n}\r\n\r\n.map {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.map-center-indicator {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border-radius: 50%;\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 0 10rpx rgba(0,0,0,0.3);\r\n  z-index: 10;\r\n}\r\n\r\n.center-icon {\r\n  font-size: 40rpx;\r\n  color: #1890ff;\r\n}\r\n\r\n.address-panel {\r\n  background: #fff;\r\n  border-radius: 24rpx 24rpx 0 0;\r\n  padding: 32rpx 24rpx;\r\n  box-shadow: 0 -4rpx 20rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.panel-header {\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.panel-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  display: block;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.panel-subtitle {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  display: block;\r\n}\r\n\r\n.address-details {\r\n  margin-bottom: 32rpx;\r\n  padding: 24rpx;\r\n  background: #f8f9fa;\r\n  border-radius: 16rpx;\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.detail-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.detail-label {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  min-width: 140rpx;\r\n}\r\n\r\n.detail-value {\r\n  flex: 1;\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  word-break: break-all;\r\n}\r\n\r\n.panel-actions {\r\n  display: flex;\r\n  gap: 24rpx;\r\n}\r\n\r\n.action-btn {\r\n  flex: 1;\r\n  height: 80rpx;\r\n  border-radius: 16rpx;\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  border: none;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.cancel-btn {\r\n  background: #f5f5f5;\r\n  color: #666;\r\n}\r\n\r\n.cancel-btn:active {\r\n  background: #e8e8e8;\r\n}\r\n\r\n.confirm-btn {\r\n  background: #1890ff;\r\n  color: #fff;\r\n}\r\n\r\n.confirm-btn:active {\r\n  background: #096dd9;\r\n}\r\n\r\n.confirm-btn:disabled {\r\n  background: #ccc;\r\n  color: #999;\r\n}\r\n\r\n.search-results {\r\n  position: absolute;\r\n  top: 120rpx;\r\n  left: 24rpx;\r\n  right: 24rpx;\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  box-shadow: 0 4rpx 20rpx rgba(0,0,0,0.1);\r\n  max-height: 400rpx;\r\n  overflow-y: auto;\r\n  z-index: 100;\r\n}\r\n\r\n.results-header {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 24rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.results-title {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.results-count {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-left: 8rpx;\r\n}\r\n\r\n.results-list {\r\n  max-height: 320rpx;\r\n  overflow-y: auto;\r\n}\r\n\r\n.result-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 24rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.result-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.result-item:active {\r\n  background: #f5f5f5;\r\n}\r\n\r\n.result-info {\r\n  flex: 1;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.result-title {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n  display: block;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.result-address {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  display: block;\r\n}\r\n\r\n.result-distance {\r\n  font-size: 24rpx;\r\n  color: #1890ff;\r\n  font-weight: bold;\r\n}\r\n\r\n.common-addresses {\r\n  background: #fff;\r\n  margin: 24rpx;\r\n  border-radius: 16rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 4rpx 20rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.common-header {\r\n  padding: 24rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.common-title {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.common-list {\r\n  max-height: 300rpx;\r\n  overflow-y: auto;\r\n}\r\n\r\n.common-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 24rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.common-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.common-item:active {\r\n  background: #f5f5f5;\r\n}\r\n\r\n.common-info {\r\n  flex: 1;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.common-name {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n  display: block;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.common-address {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  display: block;\r\n}\r\n\r\n.common-icon {\r\n  font-size: 32rpx;\r\n  color: #1890ff;\r\n}\r\n</style> ","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressSelect.vue?vue&type=style&index=0&id=43fcd552&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addressSelect.vue?vue&type=style&index=0&id=43fcd552&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1753789691031\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}