{"version":3,"sources":["uni-app:///main.js","webpack:///D:/uniapp_project/food/pkg_user/address/baiduMapSelect.vue?f048","webpack:///D:/uniapp_project/food/pkg_user/address/baiduMapSelect.vue?02b3","webpack:///D:/uniapp_project/food/pkg_user/address/baiduMapSelect.vue?ac73","webpack:///D:/uniapp_project/food/pkg_user/address/baiduMapSelect.vue?e9b2","uni-app:///pkg_user/address/baiduMapSelect.vue","webpack:///D:/uniapp_project/food/pkg_user/address/baiduMapSelect.vue?6e86","webpack:///D:/uniapp_project/food/pkg_user/address/baiduMapSelect.vue?645d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","searchKeyword","selectedLocation","selectedAddress","searchResults","searchTimer","mapUrl","onLoad","methods","checkNetworkStatus","uni","success","console","title","content","showCancel","confirmText","initSimpleMap","getCurrentLocation","type","lat","lng","icon","fail","duration","updateMapCenter","onSearchInput","clearTimeout","clearSearch","searchAddress","url","params","query","location","radius","output","ak","coordtype","queryString","map","join","method","timeout","error","res","address","distance","selectSearchResult","onMapMessage","reverseGeocode","result","generateAddressFromCoords","cancelSelect","confirmSelect","latitude","longitude","prevPage"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,uBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuI;AACvI;AACkE;AACL;AACqC;;;AAGlG;AAC6K;AAC7K,gBAAgB,uLAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAA6pB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACmFjrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EAEAC;IACA;IACAC;MACAC;QACAC;UACAC;UACA;YACAF;cACAG;cACAC;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACAR;QAAAG;MAAA;MAEAH;QACAS;QACAR;UACA;YACAS;YACAC;UACA;;UAEA;UACA;;UAEA;UACA;UAEAX;UACAA;YAAAG;YAAAS;UAAA;QACA;QACAC;UACAX;UACAF;UAEA;YACAA;cACAG;cACAC;cACAC;cACAC;YACA;UACA;YACAN;cACAG;cACAS;cACAE;YACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACAC;MACA;MAEA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAGAC;gBACAC;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;gBACA;gBAEAC,kCACAC;kBAAA;gBAAA,GACAC;gBAEA5B;gBAAA;gBAAA,OAEAF;kBACAoB;kBACAW;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAJAC;gBAAAC;gBAMAhC;kBAAA+B;kBAAAC;gBAAA;gBAAA,KAEAD;kBAAA;kBAAA;gBAAA;gBACA/B;gBACA;gBAAA;cAAA;gBAIA;kBACA;oBAAA;sBACAC;sBACAgC;sBACAZ;wBACAb;wBACAC;sBACA;sBACAyB;oBACA;kBAAA;gBACA;kBACAlC;kBACA;kBACAF;oBACAG;oBACAS;oBACAE;kBACA;gBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAZ;gBACA;gBAEAF;kBACAG;kBACAS;kBACAE;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAuB;MACA;MACA;MACA;MACA;;MAEA;MACA;IACA;IAEA;IACAC;MACApC;MACA;QACA;QACA;UACAQ;UACAC;QACA;QACA;MACA;IACA;IAEA;IACA4B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAnB;gBACAC;kBACAE;kBACAE;kBACAC;kBACAC;gBACA;gBAEAC,kCACAC;kBAAA;gBAAA,GACAC;gBAEA5B;gBAAA;gBAAA,OAEAF;kBACAoB;kBACAW;kBACAC;gBACA;cAAA;gBAAA;gBAAA;gBAJAC;gBAAAC;gBAMAhC;kBAAA+B;kBAAAC;gBAAA;gBAAA,KAEAD;kBAAA;kBAAA;gBAAA;gBACA/B;gBACA;gBAAA;cAAA;gBAIA;kBACAsC;kBACA;gBACA;kBACAtC;kBACA;gBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACA;gBAEAF;kBACAG;kBACAS;kBACAE;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACA2B;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA1C;IACA;IAEA;IACA2C;MACA;QACA3C;UAAAG;UAAAS;QAAA;QACA;MACA;MAEA;QACAgC;QACAC;QACAV;MACA;MAEA;MACA;MAEA;QACAW;MACA;MAEA9C;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3XA;AAAA;AAAA;AAAA;AAA49B,CAAgB,28BAAG,EAAC,C;;;;;;;;;;;ACAh/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pkg_user/address/baiduMapSelect.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pkg_user/address/baiduMapSelect.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./baiduMapSelect.vue?vue&type=template&id=fafa236a&scoped=true&\"\nvar renderjs\nimport script from \"./baiduMapSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./baiduMapSelect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./baiduMapSelect.vue?vue&type=style&index=0&id=fafa236a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fafa236a\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pkg_user/address/baiduMapSelect.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./baiduMapSelect.vue?vue&type=template&id=fafa236a&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.selectedLocation ? _vm.selectedLocation.lat.toFixed(6) : null\n  var g1 = _vm.selectedLocation ? _vm.selectedLocation.lng.toFixed(6) : null\n  var g2 = _vm.searchResults.length\n  var g3 = g2 > 0 ? _vm.searchResults.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./baiduMapSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./baiduMapSelect.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"baidu-map-page\">\r\n    <!-- 搜索栏 -->\r\n    <view class=\"search-bar\">\r\n      <view class=\"search-input-wrapper\">\r\n        <text class=\"search-icon\">🔍</text>\r\n        <input \r\n          v-model=\"searchKeyword\" \r\n          placeholder=\"搜索地址\" \r\n          class=\"search-input\"\r\n          @input=\"onSearchInput\"\r\n        />\r\n        <text v-if=\"searchKeyword\" class=\"clear-btn\" @click=\"clearSearch\">×</text>\r\n      </view>\r\n      <button class=\"current-location-btn\" @click=\"getCurrentLocation\">\r\n        <text class=\"location-icon\">📍</text>\r\n        <text class=\"location-text\">定位</text>\r\n      </button>\r\n    </view>\r\n\r\n    <!-- 百度地图容器 -->\r\n    <view class=\"map-container\">\r\n      <web-view \r\n        :src=\"mapUrl\" \r\n        class=\"baidu-map\"\r\n        @message=\"onMapMessage\"\r\n      ></web-view>\r\n      \r\n      <!-- 地图中心点指示器 -->\r\n      <view class=\"map-center-indicator\">\r\n        <text class=\"center-icon\">📍</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 地址信息面板 -->\r\n    <view class=\"address-panel\">\r\n      <view class=\"panel-header\">\r\n        <text class=\"panel-title\">选择地址</text>\r\n        <text class=\"panel-subtitle\">{{ selectedAddress || '点击地图选择位置' }}</text>\r\n      </view>\r\n      \r\n      <view class=\"address-details\" v-if=\"selectedLocation\">\r\n        <view class=\"detail-item\">\r\n          <text class=\"detail-label\">详细地址：</text>\r\n          <text class=\"detail-value\">{{ selectedAddress }}</text>\r\n        </view>\r\n        <view class=\"detail-item\">\r\n          <text class=\"detail-label\">经纬度：</text>\r\n          <text class=\"detail-value\">{{ selectedLocation.lat.toFixed(6) }}, {{ selectedLocation.lng.toFixed(6) }}</text>\r\n        </view>\r\n      </view>\r\n      \r\n      <view class=\"panel-actions\">\r\n        <button class=\"action-btn cancel-btn\" @click=\"cancelSelect\">取消</button>\r\n        <button class=\"action-btn confirm-btn\" @click=\"confirmSelect\" :disabled=\"!selectedLocation\">确认选择</button>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 搜索结果列表 -->\r\n    <view v-if=\"searchResults.length > 0\" class=\"search-results\">\r\n      <view class=\"results-header\">\r\n        <text class=\"results-title\">搜索结果</text>\r\n        <text class=\"results-count\">({{ searchResults.length }})</text>\r\n      </view>\r\n      <view class=\"results-list\">\r\n        <view \r\n          v-for=\"(result, index) in searchResults\" \r\n          :key=\"index\"\r\n          class=\"result-item\"\r\n          @click=\"selectSearchResult(result)\"\r\n        >\r\n          <view class=\"result-info\">\r\n            <text class=\"result-title\">{{ result.title }}</text>\r\n            <text class=\"result-address\">{{ result.address }}</text>\r\n          </view>\r\n          <text class=\"result-distance\">{{ result.distance }}km</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { baiduMapConfig } from '../../config.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchKeyword: '',\r\n      selectedLocation: null,\r\n      selectedAddress: '',\r\n      searchResults: [],\r\n      searchTimer: null,\r\n      mapUrl: ''\r\n    };\r\n  },\r\n  \r\n  onLoad() {\r\n    // 使用简单的百度地图静态图片\r\n    this.initSimpleMap();\r\n    // 检查网络状态\r\n    this.checkNetworkStatus();\r\n    // 获取当前位置\r\n    this.getCurrentLocation();\r\n  },\r\n  \r\n  methods: {\r\n    // 检查网络状态\r\n    checkNetworkStatus() {\r\n      uni.getNetworkType({\r\n        success: (res) => {\r\n          console.log('网络类型:', res.networkType);\r\n          if (res.networkType === 'none') {\r\n            uni.showModal({\r\n              title: '网络连接提示',\r\n              content: '当前无网络连接，地图功能可能受限',\r\n              showCancel: false,\r\n              confirmText: '我知道了'\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    // 初始化简单地图\r\n    initSimpleMap() {\r\n      const center = '116.397470,39.908823';\r\n      this.mapUrl = `https://api.map.baidu.com/staticimage/v2?ak=${baiduMapConfig.ak}&center=${center}&width=1200&height=800&zoom=16&markers=${center}&markerStyles=l,A,0xff0000&dpiType=ph&coordType=bd09ll`;\r\n    },\r\n    \r\n    // 获取当前位置\r\n    getCurrentLocation() {\r\n      uni.showLoading({ title: '定位中...' });\r\n      \r\n      uni.getLocation({\r\n        type: 'gcj02',\r\n        success: (res) => {\r\n          this.selectedLocation = {\r\n            lat: res.latitude,\r\n            lng: res.longitude\r\n          };\r\n          \r\n          // 更新地图中心点\r\n          this.updateMapCenter(res.longitude, res.latitude);\r\n          \r\n          // 根据坐标获取地址信息\r\n          this.reverseGeocode(res.latitude, res.longitude);\r\n          \r\n          uni.hideLoading();\r\n          uni.showToast({ title: '定位成功', icon: 'success' });\r\n        },\r\n        fail: (err) => {\r\n          console.error('定位失败:', err);\r\n          uni.hideLoading();\r\n          \r\n          if (err.errMsg && err.errMsg.includes('permission')) {\r\n            uni.showModal({\r\n              title: '需要位置权限',\r\n              content: '请在设置中允许获取位置信息，以便为您提供更好的服务',\r\n              showCancel: false,\r\n              confirmText: '我知道了'\r\n            });\r\n          } else {\r\n            uni.showToast({ \r\n              title: '定位失败，请手动选择地址', \r\n              icon: 'none',\r\n              duration: 2000\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    // 更新地图中心点\r\n    updateMapCenter(lng, lat) {\r\n      const center = `${lng},${lat}`;\r\n      this.mapUrl = `https://api.map.baidu.com/staticimage/v2?ak=${baiduMapConfig.ak}&center=${center}&width=1200&height=800&zoom=16&markers=${center}&markerStyles=l,A,0xff0000&dpiType=ph&coordType=bd09ll`;\r\n    },\r\n    \r\n    // 搜索输入处理\r\n    onSearchInput() {\r\n      if (this.searchTimer) {\r\n        clearTimeout(this.searchTimer);\r\n      }\r\n      \r\n      this.searchTimer = setTimeout(() => {\r\n        if (this.searchKeyword.trim()) {\r\n          this.searchAddress();\r\n        } else {\r\n          this.searchResults = [];\r\n        }\r\n      }, 500);\r\n    },\r\n    \r\n    // 清除搜索\r\n    clearSearch() {\r\n      this.searchKeyword = '';\r\n      this.searchResults = [];\r\n    },\r\n    \r\n    // 搜索地址\r\n    async searchAddress() {\r\n      if (!this.searchKeyword.trim()) return;\r\n      \r\n      try {\r\n        const url = `${baiduMapConfig.baseUrl}/place/v2/search`;\r\n        const params = {\r\n          query: this.searchKeyword,\r\n          location: '39.908823,116.397470',\r\n          radius: 5000,\r\n          output: 'json',\r\n          ak: baiduMapConfig.ak,\r\n          coordtype: 'gcj02ll'\r\n        };\r\n        \r\n        const queryString = Object.keys(params)\r\n          .map(key => `${key}=${encodeURIComponent(params[key])}`)\r\n          .join('&');\r\n        \r\n        console.log('搜索地址请求URL:', `${url}?${queryString}`);\r\n        \r\n        const [error, res] = await uni.request({\r\n          url: `${url}?${queryString}`,\r\n          method: 'GET',\r\n          timeout: 10000\r\n        });\r\n        \r\n        console.log('搜索地址响应:', { error, res });\r\n        \r\n        if (error) {\r\n          console.error('搜索请求错误:', error);\r\n          this.searchResults = [];\r\n          return;\r\n        }\r\n        \r\n        if (res && res.data && res.data.results) {\r\n          this.searchResults = res.data.results.map(item => ({\r\n            title: item.name,\r\n            address: item.address,\r\n            location: {\r\n              lat: item.location.lat,\r\n              lng: item.location.lng\r\n            },\r\n            distance: (item.distance / 1000).toFixed(1)\r\n          }));\r\n        } else if (res && res.data && res.data.status !== 0) {\r\n          console.error('搜索地址API错误:', res.data);\r\n          this.searchResults = [];\r\n          uni.showToast({\r\n            title: '搜索失败，请重试',\r\n            icon: 'none',\r\n            duration: 2000\r\n          });\r\n        } else {\r\n          this.searchResults = [];\r\n        }\r\n      } catch (error) {\r\n        console.error('搜索地址失败:', error);\r\n        this.searchResults = [];\r\n        \r\n        uni.showToast({\r\n          title: '搜索失败，请检查网络连接',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    \r\n    // 选择搜索结果\r\n    selectSearchResult(result) {\r\n      this.selectedLocation = result.location;\r\n      this.selectedAddress = result.address;\r\n      this.searchResults = [];\r\n      this.searchKeyword = result.title;\r\n      \r\n      // 更新地图中心点\r\n      this.updateMapCenter(result.location.lng, result.location.lat);\r\n    },\r\n    \r\n    // 地图消息处理\r\n    onMapMessage(e) {\r\n      console.log('地图消息:', e.detail);\r\n      if (e.detail.data && e.detail.data.type === 'location_selected') {\r\n        const data = e.detail.data.data;\r\n        this.selectedLocation = {\r\n          lat: data.lat,\r\n          lng: data.lng\r\n        };\r\n        this.selectedAddress = data.address;\r\n      }\r\n    },\r\n    \r\n    // 逆地理编码\r\n    async reverseGeocode(latitude, longitude) {\r\n      try {\r\n        const url = `${baiduMapConfig.baseUrl}/reverse_geocoding/v3`;\r\n        const params = {\r\n          location: `${latitude},${longitude}`,\r\n          output: 'json',\r\n          ak: baiduMapConfig.ak,\r\n          coordtype: 'gcj02ll'\r\n        };\r\n        \r\n        const queryString = Object.keys(params)\r\n          .map(key => `${key}=${encodeURIComponent(params[key])}`)\r\n          .join('&');\r\n        \r\n        console.log('逆地理编码请求URL:', `${url}?${queryString}`);\r\n        \r\n        const [error, res] = await uni.request({\r\n          url: `${url}?${queryString}`,\r\n          method: 'GET',\r\n          timeout: 10000\r\n        });\r\n        \r\n        console.log('逆地理编码响应:', { error, res });\r\n        \r\n        if (error) {\r\n          console.error('逆地理编码请求错误:', error);\r\n          this.selectedAddress = this.generateAddressFromCoords(latitude, longitude);\r\n          return;\r\n        }\r\n        \r\n        if (res && res.data && res.data.result) {\r\n          const result = res.data.result;\r\n          this.selectedAddress = result.formatted_address || '未知地址';\r\n        } else if (res && res.data && res.data.status !== 0) {\r\n          console.error('逆地理编码API错误:', res.data);\r\n          this.selectedAddress = this.generateAddressFromCoords(latitude, longitude);\r\n        } else {\r\n          this.selectedAddress = '未知地址';\r\n        }\r\n      } catch (error) {\r\n        console.error('逆地理编码失败:', error);\r\n        this.selectedAddress = this.generateAddressFromCoords(latitude, longitude);\r\n        \r\n        uni.showToast({\r\n          title: '使用备用地址解析',\r\n          icon: 'none',\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    \r\n    // 备用地址生成方案\r\n    generateAddressFromCoords(latitude, longitude) {\r\n      const lat = latitude.toFixed(6);\r\n      const lng = longitude.toFixed(6);\r\n      return `位置坐标 (${lat}, ${lng})`;\r\n    },\r\n    \r\n    // 取消选择\r\n    cancelSelect() {\r\n      uni.navigateBack();\r\n    },\r\n    \r\n    // 确认选择\r\n    confirmSelect() {\r\n      if (!this.selectedLocation) {\r\n        uni.showToast({ title: '请先选择位置', icon: 'none' });\r\n        return;\r\n      }\r\n      \r\n      const addressInfo = {\r\n        latitude: this.selectedLocation.lat,\r\n        longitude: this.selectedLocation.lng,\r\n        address: this.selectedAddress\r\n      };\r\n      \r\n      const pages = getCurrentPages();\r\n      const prevPage = pages[pages.length - 2];\r\n      \r\n      if (prevPage && prevPage.$vm && prevPage.$vm.updateLocationFromMap) {\r\n        prevPage.$vm.updateLocationFromMap(addressInfo);\r\n      }\r\n      \r\n      uni.navigateBack();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.baidu-map-page {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.search-bar {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20rpx 24rpx;\r\n  background: #fff;\r\n  border-bottom: 1rpx solid #e8e8e8;\r\n  gap: 16rpx;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.search-input-wrapper {\r\n  flex: 1;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  background: #f5f5f5;\r\n  border-radius: 24rpx;\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.search-icon {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n  margin-right: 12rpx;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  height: 72rpx;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  background: transparent;\r\n}\r\n\r\n.clear-btn {\r\n  font-size: 32rpx;\r\n  color: #999;\r\n  padding: 8rpx;\r\n  cursor: pointer;\r\n}\r\n\r\n.current-location-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  background: #1890ff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 24rpx;\r\n  padding: 16rpx 24rpx;\r\n  font-size: 26rpx;\r\n  gap: 8rpx;\r\n}\r\n\r\n.location-icon {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.map-container {\r\n  flex: 1;\r\n  position: relative;\r\n  background: #e8e8e8;\r\n  width: 100%;\r\n  height: 50vh;\r\n  min-height: 400rpx;\r\n}\r\n\r\n.baidu-map {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.map-center-indicator {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border-radius: 50%;\r\n  width: 80rpx;\r\n  height: 80rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 0 10rpx rgba(0,0,0,0.3);\r\n  z-index: 10;\r\n}\r\n\r\n.center-icon {\r\n  font-size: 40rpx;\r\n  color: #1890ff;\r\n}\r\n\r\n.address-panel {\r\n  background: #fff;\r\n  border-radius: 24rpx 24rpx 0 0;\r\n  padding: 32rpx 24rpx;\r\n  box-shadow: 0 -4rpx 20rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.panel-header {\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n.panel-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  display: block;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.panel-subtitle {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  display: block;\r\n}\r\n\r\n.address-details {\r\n  margin-bottom: 32rpx;\r\n  padding: 24rpx;\r\n  background: #f8f9fa;\r\n  border-radius: 16rpx;\r\n}\r\n\r\n.detail-item {\r\n  display: flex;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.detail-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.detail-label {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  min-width: 140rpx;\r\n}\r\n\r\n.detail-value {\r\n  flex: 1;\r\n  font-size: 26rpx;\r\n  color: #333;\r\n  word-break: break-all;\r\n}\r\n\r\n.panel-actions {\r\n  display: flex;\r\n  gap: 24rpx;\r\n}\r\n\r\n.action-btn {\r\n  flex: 1;\r\n  height: 80rpx;\r\n  border-radius: 16rpx;\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  border: none;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.cancel-btn {\r\n  background: #f5f5f5;\r\n  color: #666;\r\n}\r\n\r\n.cancel-btn:active {\r\n  background: #e8e8e8;\r\n}\r\n\r\n.confirm-btn {\r\n  background: #1890ff;\r\n  color: #fff;\r\n}\r\n\r\n.confirm-btn:active {\r\n  background: #096dd9;\r\n}\r\n\r\n.confirm-btn:disabled {\r\n  background: #ccc;\r\n  color: #999;\r\n}\r\n\r\n.search-results {\r\n  position: absolute;\r\n  top: 120rpx;\r\n  left: 24rpx;\r\n  right: 24rpx;\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  box-shadow: 0 4rpx 20rpx rgba(0,0,0,0.1);\r\n  max-height: 400rpx;\r\n  overflow-y: auto;\r\n  z-index: 100;\r\n}\r\n\r\n.results-header {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 24rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.results-title {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.results-count {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-left: 8rpx;\r\n}\r\n\r\n.results-list {\r\n  max-height: 320rpx;\r\n  overflow-y: auto;\r\n}\r\n\r\n.result-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 24rpx;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.result-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.result-item:active {\r\n  background: #f5f5f5;\r\n}\r\n\r\n.result-info {\r\n  flex: 1;\r\n  margin-right: 16rpx;\r\n}\r\n\r\n.result-title {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n  display: block;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.result-address {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  display: block;\r\n}\r\n\r\n.result-distance {\r\n  font-size: 24rpx;\r\n  color: #1890ff;\r\n  font-weight: bold;\r\n}\r\n</style> ","import mod from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./baiduMapSelect.vue?vue&type=style&index=0&id=fafa236a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./baiduMapSelect.vue?vue&type=style&index=0&id=fafa236a&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1753800639703\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}