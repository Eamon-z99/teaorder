<view class="address-page data-v-202230b6"><view class="address-header data-v-202230b6"><text class="header-title data-v-202230b6">地址管理</text><text class="header-subtitle data-v-202230b6">管理您的收货地址</text></view><block wx:if="{{$root.g0===0}}"><view class="address-empty data-v-202230b6"><image class="empty-icon data-v-202230b6" src="{{$oss+'button/我的.png'}}" mode="aspectFit"></image><text class="empty-text data-v-202230b6">暂无地址</text><text class="empty-desc data-v-202230b6">添加您的第一个收货地址</text></view></block><block wx:else><view class="address-list data-v-202230b6"><block wx:for="{{addressList}}" wx:for-item="addr" wx:for-index="idx" wx:key="idx"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({idx})}}" class="address-item data-v-202230b6" bindtap="__e"><view class="address-info data-v-202230b6"><view class="address-header-row data-v-202230b6"><view class="contact-info data-v-202230b6"><text class="address-name data-v-202230b6">{{addr.name}}</text><text class="address-phone data-v-202230b6">{{addr.phone}}</text></view><view class="address-tags data-v-202230b6"><block wx:if="{{addr.is_default}}"><text class="default-tag data-v-202230b6">默认</text></block><text class="tag-tag data-v-202230b6">{{addr.tag}}</text></view></view><text class="address-detail data-v-202230b6">{{addr.address}}</text></view><view class="address-actions data-v-202230b6"><view data-event-opts="{{[['tap',[['onEditBtnClick',[idx]]]]]}}" class="action-btn edit-btn data-v-202230b6" catchtap="__e"><text class="action-icon data-v-202230b6">✏️</text><text class="action-text data-v-202230b6">编辑</text></view><view data-event-opts="{{[['tap',[['deleteAddress',[idx]]]]]}}" class="action-btn del-btn data-v-202230b6" catchtap="__e"><text class="action-icon data-v-202230b6">🗑️</text><text class="action-text data-v-202230b6">删除</text></view></view></view></block></view></block><view data-event-opts="{{[['tap',[['onAddBtnClick',['$event']]]]]}}" class="add-btn data-v-202230b6" bindtap="__e"><text class="add-icon data-v-202230b6">+</text><text class="add-text data-v-202230b6">添加新地址</text></view><block wx:if="{{showAdd}}"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="address-modal-mask data-v-202230b6" bindtap="__e"><view class="address-modal address-modal-flex data-v-202230b6"><view class="modal-map-wrapper data-v-202230b6"><map class="modal-map data-v-202230b6" latitude="{{modalMapLat}}" longitude="{{modalMapLng}}" markers="{{addressMarker}}" scale="{{modalMapScale}}" enable-zoom="{{true}}" enable-scroll="{{true}}" show-location="{{false}}" data-event-opts="{{[['tap',[['onModalMapTap',['$event']]]]]}}" bindtap="__e"></map></view><view class="modal-form-section data-v-202230b6"><view class="modal-header data-v-202230b6"><text class="modal-title data-v-202230b6">{{editIdx===-1?'新增地址':'编辑地址'}}</text><text data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="modal-close data-v-202230b6" bindtap="__e">×</text></view><view class="form-section data-v-202230b6"><view class="input-group data-v-202230b6"><text class="input-label data-v-202230b6">收货人</text><input class="modal-input data-v-202230b6" placeholder="请输入收货人姓名" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['form']]]]]}}" value="{{form.name}}" bindinput="__e"/></view><view class="input-group data-v-202230b6"><text class="input-label data-v-202230b6">手机号</text><input class="modal-input data-v-202230b6" placeholder="请输入手机号码" type="number" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['form']]]]]}}" value="{{form.phone}}" bindinput="__e"/></view><view class="input-group data-v-202230b6"><text class="input-label data-v-202230b6">详细地址</text><textarea class="modal-textarea data-v-202230b6" placeholder="请输入详细地址" data-event-opts="{{[['input',[['__set_model',['$0','detail','$event',[]],['form']],['onDetailInput',['$event']]]]]}}" value="{{form.detail}}" bindinput="__e"></textarea></view></view><view class="tag-section data-v-202230b6"><text class="section-title data-v-202230b6">地址标签</text><view class="tag-options data-v-202230b6"><block wx:for="{{tags}}" wx:for-item="tag" wx:for-index="__i0__" wx:key="*this"><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" data-event-params="{{({tag})}}" class="{{['data-v-202230b6','tag-option',form.tag===tag?'selected':'']}}" bindtap="__e">{{''+tag+''}}</view></block></view></view><view class="default-section data-v-202230b6"><text class="default-title data-v-202230b6">设为默认地址</text><switch checked="{{form.isDefault}}" color="#1890ff" data-event-opts="{{[['change',[['e4',['$event']]]]]}}" bindchange="__e" class="data-v-202230b6"></switch></view><view class="modal-actions data-v-202230b6"><button data-event-opts="{{[['tap',[['e5',['$event']]]]]}}" class="modal-btn cancel data-v-202230b6" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['saveAddress',['$event']]]]]}}" class="modal-btn confirm data-v-202230b6" bindtap="__e">保存</button></view></view></view></view></block></view>