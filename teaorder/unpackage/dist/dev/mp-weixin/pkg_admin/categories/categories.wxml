<view class="categories-container data-v-0d7df21e"><view class="top-bar data-v-0d7df21e"><text class="page-title data-v-0d7df21e">商品分类管理</text><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="add-btn data-v-0d7df21e" bindtap="__e">添加分类</button></view><view class="categories-list data-v-0d7df21e"><block wx:for="{{categories}}" wx:for-item="category" wx:for-index="__i0__" wx:key="id"><view class="category-item data-v-0d7df21e"><view class="category-info data-v-0d7df21e"><view class="category-name data-v-0d7df21e">{{category.name}}</view><view class="category-description data-v-0d7df21e">{{category.description||'暂无描述'}}</view><view class="category-meta data-v-0d7df21e"><text class="meta-item data-v-0d7df21e">{{"排序: "+category.sort_order}}</text><text class="meta-item data-v-0d7df21e">{{"状态: "+(category.status?'启用':'禁用')}}</text><text class="meta-item data-v-0d7df21e">{{"商品数: "+(category.product_count||0)}}</text></view></view><view class="category-actions data-v-0d7df21e"><button data-event-opts="{{[['tap',[['editCategory',['$0'],[[['categories','id',category.id]]]]]]]}}" class="action-btn edit data-v-0d7df21e" bindtap="__e">编辑</button><button data-event-opts="{{[['tap',[['toggleCategoryStatus',['$0'],[[['categories','id',category.id]]]]]]]}}" class="{{['action-btn','toggle','data-v-0d7df21e',category.status?'off':'on']}}" bindtap="__e">{{''+(category.status?'禁用':'启用')+''}}</button><button class="action-btn delete data-v-0d7df21e" disabled="{{category.product_count>0}}" data-event-opts="{{[['tap',[['deleteCategory',['$0'],[[['categories','id',category.id,'id']]]]]]]}}" bindtap="__e">删除</button></view></view></block></view><block wx:if="{{$root.g0}}"><view class="empty-state data-v-0d7df21e"><text class="empty-text data-v-0d7df21e">暂无分类</text><button data-event-opts="{{[['tap',[['showAddModal',['$event']]]]]}}" class="empty-btn data-v-0d7df21e" bindtap="__e">添加第一个分类</button></view></block><block wx:if="{{showModal}}"><view data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="modal-overlay data-v-0d7df21e" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="modal-content data-v-0d7df21e" catchtap="__e"><view class="modal-header data-v-0d7df21e"><text class="modal-title data-v-0d7df21e">{{isEditing?'编辑分类':'添加分类'}}</text><text data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="modal-close data-v-0d7df21e" bindtap="__e">×</text></view><view class="modal-body data-v-0d7df21e"><view class="form-group data-v-0d7df21e"><text class="form-label data-v-0d7df21e">分类名称 *</text><input class="form-input data-v-0d7df21e" placeholder="请输入分类名称" maxlength="50" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['categoryForm']]]]]}}" value="{{categoryForm.name}}" bindinput="__e"/></view><view class="form-group data-v-0d7df21e"><text class="form-label data-v-0d7df21e">分类描述</text><textarea class="form-textarea data-v-0d7df21e" placeholder="请输入分类描述" maxlength="200" data-event-opts="{{[['input',[['__set_model',['$0','description','$event',[]],['categoryForm']]]]]}}" value="{{categoryForm.description}}" bindinput="__e"></textarea></view><view class="form-group data-v-0d7df21e"><text class="form-label data-v-0d7df21e">排序顺序</text><input class="form-input data-v-0d7df21e" type="number" placeholder="数字越小越靠前" data-event-opts="{{[['input',[['__set_model',['$0','sort_order','$event',[]],['categoryForm']]]]]}}" value="{{categoryForm.sort_order}}" bindinput="__e"/></view><view class="form-group data-v-0d7df21e"><text class="form-label data-v-0d7df21e">状态</text><switch checked="{{categoryForm.status}}" color="#667eea" data-event-opts="{{[['change',[['onStatusChange',['$event']]]]]}}" bindchange="__e" class="data-v-0d7df21e"></switch><text class="status-text data-v-0d7df21e">{{categoryForm.status?'启用':'禁用'}}</text></view></view><view class="modal-footer data-v-0d7df21e"><button data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="modal-btn cancel data-v-0d7df21e" bindtap="__e">取消</button><button class="modal-btn submit data-v-0d7df21e" disabled="{{!isFormValid}}" data-event-opts="{{[['tap',[['submitCategory',['$event']]]]]}}" bindtap="__e">{{''+(isEditing?'保存':'添加')+''}}</button></view></view></view></block></view>